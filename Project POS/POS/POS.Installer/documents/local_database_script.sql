create database DBpos
go

use DBpos
go

CREATE TABLE [dbo].[ApplicationLog] (
    [id] [int] NOT NULL IDENTITY,
    [date_added] [datetime] NOT NULL,
    [comment] [ntext] NOT NULL,
    [application_name] [nvarchar](100),
    [last_updated_on] rowversion NOT NULL,
    [extra_data] [xml],
    CONSTRAINT [PK_dbo.ApplicationLog] PRIMARY KEY ([id])
)
CREATE TABLE [dbo].[Chair] (
    [chair_id] [int] NOT NULL IDENTITY,
    [chair_number] [int] NOT NULL,
    [table_owned] [int],
    CONSTRAINT [PK_dbo.Chair] PRIMARY KEY ([chair_id])
)
CREATE INDEX [IX_table_owned] ON [dbo].[Chair]([table_owned])
CREATE TABLE [dbo].[OrderDetailsTemp] (
    [ordertemp_id] [int] NOT NULL,
    [product_id] [varchar](10) NOT NULL,
    [chair_id] [int] NOT NULL,
    [SelectedStats] [nvarchar](50) NOT NULL,
    [note] [varchar](500) NOT NULL,
    [is_printed] [int] NOT NULL,
    [discount] [int] NOT NULL,
    [quan] [int] NOT NULL,
    CONSTRAINT [PK_dbo.OrderDetailsTemp] PRIMARY KEY ([ordertemp_id], [product_id], [chair_id], [SelectedStats], [note], [is_printed])
)
CREATE INDEX [IX_ordertemp_id] ON [dbo].[OrderDetailsTemp]([ordertemp_id])
CREATE INDEX [IX_chair_id] ON [dbo].[OrderDetailsTemp]([chair_id])
CREATE TABLE [dbo].[OrderTemp] (
    [ordertemp_id] [int] NOT NULL IDENTITY,
    [totalPrice_nonDisc] [money] NOT NULL,
    [subEmp_id] [varchar](200),
    [discount] [int] NOT NULL,
    [cus_id] [varchar](10),
    [emp_id] [varchar](10),
    [table_owned] [int],
    [ordertime] [datetime] NOT NULL,
    [total_price] [money] NOT NULL,
    [customer_pay] [money] NOT NULL,
    [pay_back] [money] NOT NULL,
    CONSTRAINT [PK_dbo.OrderTemp] PRIMARY KEY ([ordertemp_id])
)
CREATE INDEX [IX_table_owned] ON [dbo].[OrderTemp]([table_owned])
CREATE TABLE [dbo].[Table] (
    [table_id] [int] NOT NULL IDENTITY,
    [is_Printed] [int] NOT NULL,
    [table_number] [int] NOT NULL,
    [chair_amount] [int] NOT NULL,
    [pos_X] [int] NOT NULL,
    [pos_Y] [int] NOT NULL,
    [is_Pinned] [int] NOT NULL,
    [is_Ordered] [int] NOT NULL,
    [is_Locked] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Table] PRIMARY KEY ([table_id])
)
ALTER TABLE [dbo].[Chair] ADD CONSTRAINT [FK_dbo.Chair_dbo.Table_table_owned] FOREIGN KEY ([table_owned]) REFERENCES [dbo].[Table] ([table_id])
ALTER TABLE [dbo].[OrderDetailsTemp] ADD CONSTRAINT [FK_dbo.OrderDetailsTemp_dbo.Chair_chair_id] FOREIGN KEY ([chair_id]) REFERENCES [dbo].[Chair] ([chair_id])
ALTER TABLE [dbo].[OrderDetailsTemp] ADD CONSTRAINT [FK_dbo.OrderDetailsTemp_dbo.OrderTemp_ordertemp_id] FOREIGN KEY ([ordertemp_id]) REFERENCES [dbo].[OrderTemp] ([ordertemp_id])
ALTER TABLE [dbo].[OrderTemp] ADD CONSTRAINT [FK_dbo.OrderTemp_dbo.Table_table_owned] FOREIGN KEY ([table_owned]) REFERENCES [dbo].[Table] ([table_id])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201712010315183_initdatabase', N'POS.BusinessContext.MigrationConfiguration',  0x1F8B0800000000000400D55CDB6EE4B8117D0F907F10F418CCBA6D4F16D835BA77E169DB8111DF326D2F669E1AB444B78591288D483936827C591EF693F61742EA4AF1229192BADD8B7919F372582C16AB8AA5AAFEE37FBFCF7F7D8D42E705A63888D1C23D3A38741D88BCD80FD066E166E4E9879FDC5F7FF9EB5FE6E77EF4EAFC568DFBC8C6D199082FDC67429293D90C7BCF3002F8200ABC34C6F11339F0E26806FC78767C78F8F3ECE8680629844BB11C67FE3943248860FE07FD7319230F262403E175ECC31097EDB46795A33A37208238011E5CB877B7AB834F190E10C498CE23F095B8CE6918004ACA0A864FAE03108A092094D093070C57248DD16695D00610DEBF25908E7B022186E5064E9AE1A67B393C667B9935132B282FC3248E2C018F3E96CC9989D307B1D8AD9947D9774ED94CDED8AE73162EDCD32409032F47BF8A37AE232E79B20C5336BCE0733E3D80F8A03DED83C3777EA8C5824A0FFBF7C1596621C952B84030232908E9F8EC91CEFF277CBB8FBF41B4405918F274524A695FAB8136DDA5710253F2F6193E95D45FFAAE336BCF9B8913EB69DC9C624797887C3C769D1BBA38780C612D06DCEE57244EE13F20822920D0BF0384C014310C9833525A5D58EB8CCE3AF57D582FC91AEEA9A02B56ED465AC65144D7AC70A810D30BE93AD7E0F50AA20D795EB8F4BFAE7311BC42BF6A29811F5040EF2F9D44D2CC7E61EEA459430701478787460474AF77053079487CC6EE5B54ADF6294020A5DC667A214B53AA90DEAE73C47CB916153F09346836DD7FC694E34946A02C6102C1E7AF54A4E9B98209CE865F693E6B2E6BE7155E3E832035BEB9F9E877BBB0F9EA436E6D3D715757375FF0268B1E61DAB76837D03D1B7BFB6F0445E2856937E025D8E4A40B00B7A90FD333484010E27B1825D8753EC3301F899F83A4B07207E2A875291617691C7D8E43054E31627D0FD20D648A25EE1CB68AB3D49337ABA53ADFB692D26AD9BCBF218F6BAE17AB68E2FB2A7A07DD157173C6D7469CF86E37282784500AE45BA41C4F5BFCCC2386A335F75339961E26F4E8D55A51C661A31937319124486DD7F11DD5A12AE5DBAB285AFC19AB2C6E62D47BBF39067798C61EF55FFEBD251227539E268B0962A1E5C98F66DEC296A82C44B183B8F73D31EE02ECE2CCCE02ECC559E35E0EB374FFCA00B244D09A8FD27A4D69E844A3D2630FADCC73614B4CA8E58677505C8FEAA7BA193ADE32DA9BC47DB5853B3614A65EE53DC509E9D5F620BD96ECD6D50F43E80511085DE72EA5FF2B832F3FBBCECA038C90BF5B5FC655F678CEEF4DA1E48E4D95DC2E94C732C39398D09EC75A0F4BA659C5D4E5574A64D03CB207470B1A31DB9A7C2D732501D33BF0B6B53528F627E07D9B0E7FEA3796AD32EF7D6BC97A7FFC7B8B5F5E7873095D6A63C3F58FB230E5EA86D6251FFD6E96255F7D8855A927EECAA2187B8A062A6B8A7047EE449D46E30DC25D8CBF8C46F83A0E81323740B21AB746C9EFD17898ABD8FB668DD2ED62AB159D4188465465AAF08DB50BDDA176CD149852C12A149C89023BC538F6829C188D95289F1EED5D9E23DF317B87144E88CAB0509F842AB68045DE29610BF76F122F7B57A939D1AC523E94DAD0471234D582545811FB3CB6A4E740F52AD52FB2CA0C9017242034A242986D197A9AD58B893D67308188294A238E8FA4A25E4C30097DFC9ACF38493210304ED23BCF5C65B705911A244BAAEBD4E09657B08D79787030A51CC914981C9DC666DB0B90CC58E3E54BA7FFFD8447ED9D1AEB0E45DC614B5A4AE1141B08EFB6B495448DC9897787E247682DE91426A0660702C87B0D3A39507EE5E931515D72A5744976A6AD14ABEF4A532918B9875AAAF0AC585A0E9D01D3EA1B7FECE54045AE8EF4207CC0B07C13E2F22B8078FA0C740589328785FA908D3F578A8198E52289531BB0F28C259C523C7BA62B82091292AC4B4D403BD18C60F2F3574194374598CE1DAB7E7F55049E1BDC1DAB17E5CED865AE77A364B224CFC64E32875B9DBDF8F06F73C2944BFCAB45C31E9DBB67E4F0890C31E484C2C5E3902A199986059A789981B068FC175B0F663AA1917D1623FE0FE05CEB012EB34A6B697B6D6DAFA4F75AD73182523DB56B8350F7CD67456667D9309F695240E7D7204902B4E15242CB166755E4832E7F58D9E7494605C6CCC38A74C99ADA7A2512A76003855E9632E6C30BCA53C2D2C11E010BC62CFD481AD6327F1A755D2DA5B670F28955DABC9AC7FE5F46C1E4FC58D11ECA8E43097341B7C9D20EF31D43EEE4FB001C96A90B42902A922F97719845A8F83B50B821FAD95C3A250FC29205D7A0683707AB332A7928AF6A34C7911224793CD074AE51DE6B0E2C6442F2B021ED5A6745DF9AE5059BA372E98A3C2264CD6B3F6F97C1E633412024CF519240412588826D24F6A5861A2BED4AA7C340C835F3B40255858E5A02956B503B316FA51ECA60A8EC3107E49D7E1E8FE48A3D56BF06DEEDD465233D56002467DB5E16FA2174CC6FBDCB79EEC75587A5787009673C5C52340F91B529845648FBE2E17A1205F5984592160F859419847A04EEEB58CBECE075A24E30EC026B121D5AD6A76E35472A32A57894EF79CB7EDDC1092FDF985BF7CED74D91B2D3D2A175F71A55FD16B7A6CED2E13171DE6A49E774D259A6E2B43442862DC9516C6B00EF8719AE6ED90844272D6E9A878885421E9876913F80F6F0BC49A711389F77AC1320E5027401D6B9332D1B01DED68F79EBDE689AF20D3956CB28DFC2061A4633AF532045B92EA4D14EB2F5864993F9DE4B95CA612C28B377185B491CB26700225B95522473B44431C6EB2F96105F6588AF964C2FD339449E97CD3650754E878055B7DB8055991D0256D5BCE3DB2A8569C421F5EA75B84608CBCCCB10497FF9AE14332986B024BFF825F059BC64F586A9DD3E60030E56DFC36518E44FF46AC03540C113C4A4C8F8728F0F8F8E8502E0FD29C69D61EC878A10934D45EE25F2E1EBC2FD8FF3DF21996DB29AEA4F6A0BEA9CA38031BE3763CD32B1898FDF14CBB0163224F1D56B97C9965F982C41E4A04D89F60252AA0053B9EAB559C0A4C4558ADE14F06CC39800161CEF2D49B5DC111FDD2916A3B2DB4DF6E8F2D37162AA7B82F60B6B33738B22DB8EC4700B59E2B41C590E46CF4D36EFC4B9FCB2E6A67E7072A373E21C52664F73AA068592E30EB8FB39A698D015DFB01020E560FB5246752042A56FB5A1867E516EF3C84E3CF8B93AF93012519EEF05096A3538F00ED9EFAC9A376A57CA2A45A582FFD17E67882B2E5443DA63F272345CDFF842ADCE108CEF5C995FFFFC490AD0B6A76A465CC2A96D8A2A92542C17C508DAE3715124BD281EDBBB2F53C850154F3255282674C1DECDDA63EEDA3EEBC48F2B0A1BEC1BB722536304AB1D921A83D4C4A3CC5146D71B8D5326BA604FBF2269666E5189F001A4B16EE978F7B61D2E1A8E53068BC6017C1D03C0058946810895400351DA8540C38DF0E81297F2F1675F64A2CFB21A99723E3C8FD7287FB6E359313CE17BF4CA7B549A526ADD4139D88A2CC5A1352D83C440F711C1DC0AD88B81F1F9777EF3DAEB0213F373DC773D6177623D218E2DEB8BBED5F7A420641A7D616887FE9C7AC2DC3AED5A47A8CB3BE43458F1D8BAEA370CCA378A4F44F429F418D3332FBC9E21251EFA0A0FD50AC38A3F8C6A3F54CB0DAF10E92E10D1AE655E3FA22F1F5181EF476549EBC0B9F44E9B0280CE5A827D2B19699D1497EB60541CA2AE6CF8139584986FE25D4F7C923A8F21276D781DA6A9E5909301A8CDE17EF19B5A3C1C6C1A08F6FBDF087A2D6B538FB9444F7165F9048AAA21C283F99A1E19FBF6799A92E0097884767B10E3FCB79F7E03610659B6DA23F42FD16D46928CD02DC3E8316CA55B31E3D9B57E5EB0D2A6797E9BE43F6431C5162899010BFCDDA24F5910FA35DD178AB7BE068259E532D0C4CE92B080D3E6AD46927F26500754B2AF7626D855082918BE452BF00287D0F680E115DC00EFADCAE9D083F41F449BEDF3B3006C5210E112A3994FFFA432EC47AFBFFC1FAD8D99F6F85E0000 , N'6.2.0-61023')



--delete [ApplicationLog]
--delete [OrderDetailsTemp]
--delete [OrderTemp]
--delete [Chair]
--delete [Table]


--drop table [ApplicationLog]
--drop table [OrderDetailsTemp]
--drop table [OrderTemp]
--drop table [Chair]
--drop table [Table]