create database DBpos
go

use DBpos
go


CREATE TABLE [dbo].[ApplicationLog] (
    [id] [int] NOT NULL IDENTITY,
    [date_added] [datetime] NOT NULL,
    [comment] [ntext] NOT NULL,
    [application_name] [nvarchar](100),
    [last_updated_on] rowversion NOT NULL,
    [extra_data] [xml],
    CONSTRAINT [PK_dbo.ApplicationLog] PRIMARY KEY ([id])
)
CREATE TABLE [dbo].[Chair] (
    [chair_id] [int] NOT NULL IDENTITY,
    [chair_number] [int] NOT NULL,
    [table_owned] [int],
    CONSTRAINT [PK_dbo.Chair] PRIMARY KEY ([chair_id])
)
CREATE INDEX [IX_table_owned] ON [dbo].[Chair]([table_owned])
CREATE TABLE [dbo].[OrderDetailsTemp] (
    [ordertemp_id] [int] NOT NULL,
    [product_id] [varchar](10) NOT NULL,
    [chair_id] [int] NOT NULL,
    [SelectedStats] [nvarchar](50) NOT NULL,
    [note] [varchar](500) NOT NULL,
    [is_printed] [int] NOT NULL,
    [discount] [int] NOT NULL,
    [quan] [int] NOT NULL,
    CONSTRAINT [PK_dbo.OrderDetailsTemp] PRIMARY KEY ([ordertemp_id], [product_id], [chair_id], [SelectedStats], [note], [is_printed])
)
CREATE INDEX [IX_ordertemp_id] ON [dbo].[OrderDetailsTemp]([ordertemp_id])
CREATE INDEX [IX_chair_id] ON [dbo].[OrderDetailsTemp]([chair_id])
CREATE TABLE [dbo].[OrderTemp] (
    [ordertemp_id] [int] NOT NULL IDENTITY,
    [sale_value] [money] NOT NULL,
    [totalPrice_nonDisc] [money] NOT NULL,
    [Svc] [money] NOT NULL,
    [Vat] [money] NOT NULL,
    [subEmp_id] [varchar](200),
    [discount] [int] NOT NULL,
    [Pax] [int] NOT NULL,
    [cus_id] [varchar](10),
    [emp_id] [varchar](10),
    [table_owned] [int],
    [ordertime] [datetime] NOT NULL,
    [total_price] [money] NOT NULL,
    [customer_pay] [money] NOT NULL,
    [pay_back] [money] NOT NULL,
    CONSTRAINT [PK_dbo.OrderTemp] PRIMARY KEY ([ordertemp_id])
)
CREATE INDEX [IX_table_owned] ON [dbo].[OrderTemp]([table_owned])
CREATE TABLE [dbo].[Table] (
    [table_id] [int] NOT NULL IDENTITY,
    [is_Printed] [int] NOT NULL,
    [table_number] [int] NOT NULL,
    [chair_amount] [int] NOT NULL,
    [pos_X] [int] NOT NULL,
    [pos_Y] [int] NOT NULL,
    [is_Pinned] [int] NOT NULL,
    [is_Ordered] [int] NOT NULL,
    [is_Locked] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Table] PRIMARY KEY ([table_id])
)
ALTER TABLE [dbo].[Chair] ADD CONSTRAINT [FK_dbo.Chair_dbo.Table_table_owned] FOREIGN KEY ([table_owned]) REFERENCES [dbo].[Table] ([table_id])
ALTER TABLE [dbo].[OrderDetailsTemp] ADD CONSTRAINT [FK_dbo.OrderDetailsTemp_dbo.Chair_chair_id] FOREIGN KEY ([chair_id]) REFERENCES [dbo].[Chair] ([chair_id])
ALTER TABLE [dbo].[OrderDetailsTemp] ADD CONSTRAINT [FK_dbo.OrderDetailsTemp_dbo.OrderTemp_ordertemp_id] FOREIGN KEY ([ordertemp_id]) REFERENCES [dbo].[OrderTemp] ([ordertemp_id])
ALTER TABLE [dbo].[OrderTemp] ADD CONSTRAINT [FK_dbo.OrderTemp_dbo.Table_table_owned] FOREIGN KEY ([table_owned]) REFERENCES [dbo].[Table] ([table_id])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201712081012094_initdata', N'POS.BusinessContext.MigrationConfiguration',  0x1F8B0800000000000400D55CCD6EE4B811BE07C83B083A06B36EDB9305768DF62E3C6D3B30E2BF4CDB8399538396E8B63012A51129C78D204F96431E29AF1092FAA3484A222575BB177319F3E763B158AC2A96AAFA7FFFF9EFFCF7B728745E618A83189DBA470787AE039117FB015A9FBA1979FEE917F7F7DFFEFCA7F9851FBD395FCA711FD9383A13E153F78590E46436C3DE0B8C003E88022F8D71FC4C0EBC389A013F9E1D1F1EFE3A3B3A9A410AE1522CC7997FCE100922C8FFA07F2E62E4C1846420BC897D18E2A29DF62C39AA730B228813E0C153F7FE6E79F029C3018218D37904BE11D7390B03404959C2F0D9750042310184127AF288E192A4315A2F13DA00C2874D02E9B8671062586CE0A41E6EBA97C363B697593DB184F2324CE2C812F0E863C19C993C7D108BDD8A79947D1794CD64C376CD5978EA9E254918781CFD3A5EBB8EBCE4C9224CD9F09CCF7C7A00F14173DA0747ECFC508905951EF6EF83B3C84292A5F014C18CA420A4E3B3273AFFEF70F3107F87E814656128D24929A57D8D06DA749FC6094CC9E6337C2EA8BFF25D67D69C37932756D38439F98EAE10F978EC3AB77471F014C24A0C84DD2F499CC2BF41045340A07F0F0881296218903352595D5AEB9CCE3AF37D582DC91A1EA8A06B56ED465AC45144D72C71A810D30BE93A37E0ED1AA235793975E97F5DE73278837ED952003FA280DE5F3A89A499FDC2C249B3860E028E0E0F8D08E85EEF1A60F298F88CDD77A85CED5380404AB9CDF44296A654216D6E38225FAE41C52F120D2D9BEE3F63CAF1242350953089E08B372AD2F45CC1046723AE349FD597B5F30A2F5E40901ADF5C3EFADD2E2C5F7DC8ADAD26EEEAEAF2056FB3E809A67D8B76033DB0B177FF4450265E9A760B5E8335275D02B84B7D989E430282103FC028C1AEF319867C247E0992DCCA1DC8A35685585CA671F4390E3538F988D50348D7902996B873D832CE524FDD6C2BD57CDB5A4ACB65797F4D9ED05C2D56D224F695F40EBA2BF2E68CAF8D3CF1DD6E102784500AD45BA41D4F5BFCCC2386A35BEEA7762C3D4CE8D1ABB5A48CC346336E63A24890DEAEE37BAA4375CAB7575134F8335659DCC6A8F77E0B0CEE308D3DEABFF87B4B244EA63C4D1693C4A295273F9B790B5BA23217C50EE2DEF7C4840BB08B333B0FB01767B57B39CCD2FD2303C812A1D57C14D66B4A43271B951E7B68659E735B6242AD30BC83E26A543FD5F5D0F196D1DE24EEAB2DDCB1A130F52A9720845F409855BAE71C7A410442D7B94FE9FF8AA0CBAFAEB3F40023E0AFF6EE26A534A4CAC383F4E2B37BBDB59596AFDBC3FE02C8F6E8CE9E2EC453D7A8FF6353F5BF0BB57ACF1E8F630016199EC43BE97907F7F0749A554C5F53DACB1ED4F18BC18198FA7E6D4D40175CFFC2F41E6CB6B606C5FE04BCEFD3E14FFD7CB5B593BDCF58D5A48E7FCA8ACB4BCF59A94B6FC785FE51C6BB58DDD070F3D1EF66B4F9EA430C76357157C6DAD809375059534492B87F7A164D605162FC7534C2B7710894B90152D5B8350ABF47E361AE63EFBB354AF7EB45AFE80CA25FB22AD345C6AC5F271D6AD74C816915AC46C19928B0338C632FE0C4B45889E255D7DCE505F21DB3275EEE84E80C0BF549A8620BD8470D4AD8A9FB178597BDAB549CA85729DEA04DE823059A6A412AAC887D795CD073A07A95EA17556506C80B12101A5121CDB68CEACDAAC5E49E739840C414A511C74752512D2699843E7ECD67822419089820E99D67AEB3DB92480D9225DD75AA718B2BD8C43C3C3898528E540A4C8EAEC566DB0B90CA58E3E50BA7FFFD8447EF9D1AEB0E4D48674B5A4AE3141B08EFB6B495428DC989777FE518A1B5945398809A1D08A0E835B4C981F6035A8F89EA922BAD4BB2336DA5597D579A4AC3C83DD452B967C5329EE80C9896E913B1C781F23428E541F88861F126C4C50716F9F419E812126D7A10F5216B7FAE100339814811A72660E9192B388578F64CD70413142455979A8076A219C1F0F3D7411437459A2E1C6BFBFECA8F1BC2E0EECF20B2DC19BBCCD56EB44C56E4D9D8491670CBB3971FFE4D4E9872497CB5B4B0A7CDDD3372F86486187242E3E20948A58C4CC38296789981B0B4F82FB61ECC7442A3FA2C46FC1FC0B9C6035C6555ABA5EDB5B5BD92DE6B5DC7084AF9D4AE0C42D5379FE549B345C37CD6925D3BBF014912A0B5906D5BB438CB3CD576F1D3D23E0535CA31661ED664A256D4562B9138056B28F5B26C3C1F5E529E129669F704583066E147CAB086F96B51D7E5527A0BA79E58A9CDCB79ECFF45144C4D3D96EDA1EA38143097749B2CA393EF180A27DF07E0B0246810825493D7BA88C32C42F9DF81C60D699F2D64AA8A202C0F7305F27673B02A595584F2CA46731C25F754C40375E70AF15E736029C954840D69D72ACBFB562CE5DA1C55C8041511216B5EF9BC5D059BCF2481503C4745022595200BB691D8171A6AACB46B9D0E03216F99D72A5065E8A821505C83DA897923AB530543458F39A0E8F48B78842BF658FF1A78B753578DF45801509C6D7B59E88768637EE35D2E723F2E3B2CC543C8E513E192BC7988AC4D21B452469D08D79383D98E99E7BF8950489B9CD98E207C1D6B981DBC4AF4B99B5D6075A644C3FA54ADE64879129A88F283B7ECD71D9CF0F28DB975EF7CDD846C28110ED3E6D56BDE6EA189D5C4A78642AEBA57A8ECB7A0F45582E30DE6F3793E93389F3758AC5FE52C3518C55B2D993EDD55E3894922086FB05090795E52433D66D8723B1AB6D80BE2402BDE7D5102D9638DEBE62162AD9167A66AD5AFC13D3CAF738B24CEF38E550294C4886E212812891A06136C564FBC756FD46EF1A01EAB72B581010375DB32AF532065B9CEA5D14EB2DBAD744B85452F553AEF39A7CCDE7B6E64B4A86E1288AC5512CF6C6988628C575F2D21BEA910DF2C995EE4B6C83C2F9A6DA0AA041709AB6AB7012BD35C24ACB279C7B7558959C943AAD5ABD89514A39A17F1A2FE32712580940F61198FF16BE0B3E0D17283A91373C0061C2C7F848B30E0F18A72C00D40C133C4244F7F738F0F8F8EA542F3FD29FA9E61EC879A789B4DE5F715F2E1DBA9FB2FE7DF43D2FC5435D59FE11754095801637C6FFA9E65969718CCCA97612D644816B0D72CC72E3EB75982A811AC02ED15A45401A66A7575BD804929B512CACAE1D9863101EC4B416FE9B3E58EC45057BE1895DD6EB24797398F13D3B6F778BFB0D633B728B2CDB094B090254EC3911560DAB9C9E69D38575F57C2D40F0E373A27CE2165F634A76A50903BEE80BBDFA69A095DC11E0B01D20EB62F99D5476574FAB635EED22FCA4D1ED9898738B74D3E8C4454E47B4E825E0D0EBC43F63B2BE78DDA95B61A56ABE07FB6DF19128A58F590F698A21C0DD737BE54F93404E387504EDA3F7F9242C7EDA99A1197706A9B2286D7F265A218417B1C5D446D0C9E504F380C40281A1C0620C4D3DA2FD5B1BD2336C56D10AA00874C2F036BA69AD5645BB09757F698BB7654DAEEA1502A38F891D008D18D91CB666C6E0C521D983347195D85364EABB645BDFA356A3D738BDA548CA48DF5CFC7FBF9CDB8D9709C226A360EE0DB1800215A360A44AA0F1B88D22C0F1BEE8D8C2E7C2A5EC1F6A547EDB977230B118667771B655577BCAF8697018C5E798F0A960AAD3B28335F93BB3AB4D2699018B47D4D31B702F662607CFE9D1FFFF6BAECC8FC1CF75D4FD89D584FAC67CBFAA26FF53D29139A465F18DAA13FA69E30B74EBBD611FAA21F35395A3EB6AEAA1E83A29EFC5B197D0A3DC5F4CC73AF6748E14F7BDD8F6E85612541461541BAE586D70D75970DB5AE655E55D45E54A403DF8F7AA3C6810B49BF3665219D1526FB5648D4382921E9C3A864485FEFF2072A1432DFC4BB9EF824D53F434EDAF03A4C53E1A36645509B23FCC43EB5783858D710EC07F711F41AD6A61A73859EE3D2F249149543A407F30D3D32F611F82C25C133F008EDF620C6FC17C178BE274BDB7B82FE15BACB489211BA65183D858DBC33663CBBD6E7654C4D9AE77709FF799329B640C90C58E0EF0E7DCA82D0AFE8BED4BCF55B2098552E024DEC2C090B38AD371592FABB9C6D4005FB2A67825D859082E13BB404AF70086D8F185EC335F03665724B3B48FF4134D93E3F0FC03A05112E30EAF9F44F2AC37EF4F6DBFF019997C61E69620000 , N'6.2.0-61023')





--delete [ApplicationLog]
--delete [OrderDetailsTemp]
--delete [OrderTemp]
--delete [Chair]
--delete [Table]


--drop table [ApplicationLog]
--drop table [OrderDetailsTemp]
--drop table [OrderTemp]
--drop table [Chair]
--drop table [Table]
--drop table [__MigrationHistory]